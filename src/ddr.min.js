"use strict";var DD={generatedId:1,genId:function(){return this.generatedId++},extend:function(){for(var a=arguments,b=a[0],c=1;c<a.length;c++)if("object"==typeof a[c]){var d=a[c];for(var e in d)"object"==typeof d[e]?"object"==typeof b[e]?b[e]=DD.merge(b[e],d[e]):b[e]=DD.merge({},d[e]):b[e]=d[e]}return b},merge:function(a,b){function c(a,b){if(-1!==d.indexOf(b))return b;if(d.push(b),DD.isArray(a)&&DD.isArray(b))b.forEach(function(b,d){DD.isArray(b)?a[d]=c([],b):DD.isObject(b)?a[d]=c({},b):a[d]=b});else for(var e in b)DD.isObject(b[e])?(DD.isObject(a[e])||(a[e]={}),c(a[e],b[e])):DD.isArray(b[e])?(DD.isArray(a[e])||(a[e]=[]),b[e].forEach(function(b,d){var f;f=DD.isObject(b)?c({},b):DD.isArray(b)?c([],b):b,a[e][d]=f})):void 0!==b[e]&&(a[e]=b[e]);return a}var d=[];return c(a,b),a},assign:function(a,b){Object.assign?Object.assign(a,b):DD.getOwnProps(b).forEach(function(c){a[c]=b[c]})},getOwnProps:function(a){return a?Object.getOwnPropertyNames(a):[]},isFunction:function(a){return void 0!==a&&null!==a&&a.constructor===Function},isArray:function(a){return void 0!==a&&null!==a&&a.constructor===Array},isObject:function(a){return null!==a&&void 0!==a&&a.constructor===Object},isInt:function(a){return Number.isInteger(a)},isNumber:function(a){return"number"==typeof a},isBoolean:function(a){return"boolean"==typeof a},isString:function(a){return"string"==typeof a},isEmpty:function(a){if(null===a||void 0===a)return!0;var b=typeof a;if(DD.isObject(a)){var c=Object.keys(a);if(void 0!==c)return 0===c.length}else if("string"===b)return""===a;return!1},get:function(a,b,c){return c=c||document,b===!0?c.querySelectorAll(a):c.querySelector(a)},append:function(a,b){if(DD.isNode(b))a.appendChild(b);else if(DD.isString(b)){var c=DD.newEl("div");c.innerHTML=b,DD.transChildren(c,a)}},isEl:function(a){return void 0!==a&&null!==a&&a.nodeType===Node.ELEMENT_NODE},isNode:function(a){return void 0!==a&&null!==a&&(a.nodeType===Node.TEXT_NODE||a.nodeType===Node.ELEMENT_NODE||a.nodeType===Node.DOCUMENT_FRAGMENT_NODE)},cloneNode:function(a){var b;return b=a.cloneNode(!0),DD.copyProp(b,a),b},copyProp:function(a,b){var c={};if(a&&b){var d=["$model","$module","$events"];DD.getOwnProps(b).forEach(function(a){if("$"===a[0]){for(var e=!1,f=0;f<d.length;f++)if(a===d[f]){e=!0;break}e||(c[a]=b[a])}}),DD.merge(a,c),a.$module=b.$module,a.$events={},b.$model&&(a.$model={},DD.getOwnProps(b.$model).forEach(function(c){a.$model[c]=b.$model[c]})),DD.isEmpty(b.$events)||DD.getOwnProps(b.$events).forEach(function(c){var d=b.$events[c];if(d instanceof DD.Event){d.module;d.view=a,delete d.module;var e=DD.merge({},d);new DD.Event(e)}});for(var e=0;e<a.childNodes.length;e++)DD.copyProp(a.childNodes[e],b.childNodes[e])}},getAttrs:function(a,b){for(var c=[],d=0;d<a.attributes.length;d++){var e=a.attributes[d];b.test(e.name)&&c.push(e)}return c},getAttrsByValue:function(a,b){for(var c=[],d=0;d<a.attributes.length;d++){var e=a.attributes[d];b.test(e.value)&&c.push(e)}return c},copyAttrs:function(a,b){for(var c=0;c<a.attributes.length;c++){var d=a.attributes[c];b.setAttribute(d.name,d.value)}},newEl:function(a,b,c){var d=document.createElement(a);return DD.isObject(b)?DD.attr(d,b):DD.isString(c)&&(d.innerHTML=c),d},newSvgEl:function(a){return document.createElementNS("http://www.w3.org/2000/svg",a)},replaceNode:function(a,b,c){var d=a.parentNode,e=a.nextSibling;null!==d&&(d.removeChild(a),DD.isArray(b)||(b=[b]),b.forEach(function(b){void 0===e||null===e?d.appendChild(b):d.insertBefore(b,e),c!==!1&&(c=!0),c&&a.$isView&&DD.copyProp(b,a)}))},insertAfter:function(a,b,c){var d=this,e=null;void 0===b||null===b?e=c.firstChild:(c=b.parentNode,e=b.nextSibling),DD.isNode(c)&&(null===e?DD.isArray(a)?a.forEach(function(a){d.isEl(a)&&c.appendChild(a)}):c.appendChild(a):DD.isArray(a)?a.forEach(function(a){d.isEl(a)&&c.insertBefore(a,e)}):c.insertBefore(a,e))},empty:function(a){for(var b=a.childNodes,c=b.length-1;c>=0;c--)a.removeChild(b[c])},remove:function(a){null!==a.parentNode&&a.parentNode.removeChild(a)},copyChildren:function(a){for(var b=a.childNodes,c=[],d=b.length-1;d>=0;d--)c.push(b[d]);return c},transChildren:function(a,b){for(var c=document.createDocumentFragment();a.childNodes.length>0;)c.appendChild(a.childNodes[0]);b.appendChild(c)},attr:function(a,b,c){if(void 0===c||null===c){if(DD.isObject(b))DD.getOwnProps(b).forEach(function(c){"value"===c?a[c]=b[c]:a.setAttribute(c,b[c])});else if(DD.isString(b))return"value"===b?b.value:a.getAttribute(b)}else"value"===b?a[b]=c:a.setAttribute(b,c)},css:function(a,b,c){var d;if(window.getComputedStyle&&(d=window.getComputedStyle(a,null)),d)if(void 0===c||null===c){if(!DD.isObject(b))return d[b];DD.getOwnProps(b).forEach(function(c){void 0!==DD.cssconfig&&void 0!==DD.cssconfig[c]?DD.cssconfig[c].forEach(function(d){a.style[d]=b[c]}):a.style[c]=b[c]})}else void 0!==DD.$cssconfig&&void 0!==DD.$cssconfig[b]?DD.$cssconfig[b].forEach(function(b){a.style[b]=c}):a.style[b]=c},width:function(a,b){if(!DD.isNumber(b)){var c;if(window.getComputedStyle&&(c=window.getComputedStyle(a,null)),!c)return null;var d=parseInt(c.width);if(b===!0){var e=parseInt(c.paddingLeft)+parseInt(c.paddingRight);d-=e}return d}a.style.width=b+"px"},height:function(a,b){if(!DD.isNumber(b)){var c;if(window.getComputedStyle&&(c=window.getComputedStyle(a,null)),!c)return null;var d=parseInt(c.height);if(b===!0){var e=parseInt(c.paddingTop)+parseInt(c["paddingBotto,"]);d-=e}return d}a.style.height=b+"px"},addClass:function(a,b){var c=a.className.trim();if(DD.isEmpty(c))a.className=b;else{for(var d=c.split(/\s+/),e=0;e<d.length;e++)if(d[e]===b)return;d.push(b),a.className=d.join(" ")}},removeClass:function(a,b){var c=a.className.trim();if(!DD.isEmpty(c))for(var d=c.split(/\s+/),e=0;e<d.length;e++)if(d[e]===b)return d.splice(e,1),void(a.className=d.join(" "))},formatDate:function(a,b){if(DD.isString(a)){var c=new RegExp(/^\d+$/);if(null!==c.exec(a))try{a=parseInt(a)}catch(d){}}var a=new Date(a),e={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours()%12===0?12:a.getHours()%12,"H+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()},f={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};return/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))),DD.getOwnProps(e).forEach(function(a){new RegExp("("+a+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)))}),/(E+)/.test(b)&&(b=b.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+f[a.getDay()+""])),b},toDate:function(a){var b;try{b=new Date(Date.parse(a))}catch(c){}return(isNaN(b)||isNaN(b.getDay()))&&(14===a.length?(a=a.substr(0,4)+"/"+a.substr(4,2)+"/"+a.substr(6,2)+" "+a.substr(8,2)+":"+a.substr(10,2)+":"+a.substr(12),b=new Date(Date.parse(a))):8===a.length&&(a=a.substr(0,4)+"/"+a.substr(4,2)+"/"+a.substr(6,2),b=new Date(Date.parse(a)))),b},compileStr:function(a){for(var b,c=new RegExp(/\{.+?\}/),d=arguments;null!==(b=c.exec(a));){var e,f=b[0].substr(1,b[0].length-2),g=parseInt(f)+1;e=void 0!==d[g]?d[g]:"",a=a.replace(c,e)}return a},parseJson:function(a){a=a.trim();var b=a.substr(1,a.length-2).split(","),c={},d=new RegExp(/\'/g);new RegExp(/\"/g);return b.forEach(function(a){var b=a.split(":");if('"'!==b[0]&&"'"!==b[0]||'"'!==b[b.length-1]&&"'"!==b[b.length-1]){var e=b[0].replace(d,"\\'"),f=b[1],g=f.length;g>2&&('"'===f[0]&&'"'===f[g-1]||'"'===f[0]&&'"'===f[g-1])&&(f=f.substr(1,g-2)),c[e]=f}}),c},load:function(a,b,c){var d=DD.get("head");switch(null===d&&(d=document.body),a){case"css":var e=DD.get("link[href='"+b+"']");if(null!==e)return;var f=DD.newEl("link");f.type="text/css",f.rel="stylesheet",f.href=b,d.append(f),DD.isFunction(c)&&c();break;case"js":var e=DD.get("script[src='"+b+"']");if(null!==e)return;DD.request({url:b,type:"js",successFunc:function(a){var e=DD.newEl("script");e.innerHTML=a,d.appendChild(e),e.innerHTML="",e.src=b,DD.isFunction(c)&&c()}})}},request:function(a){var b=new XMLHttpRequest,c=a.async===!1?!1:!0;a.type||"text";"function"==typeof a.successFunc&&(b.onload=function(c){switch(b.status){case 200:var d=b.responseText;switch(a.type){case"json":d=JSON.parse(d)}a.successFunc.call(b,d);break;default:DD.isFunction(a.errorFunc)&&a.errorFunc.call(b,b.status)}}),DD.isFunction(a.errorFunc)&&(b.onerror=a.errorFunc),DD.isFunction(a.timeoutFunc)&&(b.ontimeout=a.timeoutFunc);var d=a.reqType||"GET",e=a.url;switch(d){case"GET":var f;if(DD.isObject(a.params)){var g=[];DD.getOwnProps(a.params).forEach(function(b){g.push(b+"="+a.params[b])}),f=g.join("&")}void 0!==f&&(e+=-1!==e.indexOf("?")?"&"+f:"?"+f),b.open(d,e,c,a.user,a.pwd),b.timeout=a.timeout||0,b.send(null);break;case"POST":var h=new FormData;for(var i in a.params)h.append(i,a.params[i]);b.open(d,e,c,a.user,a.pwd),b.timeout=a.timeout||0,b.send(h)}}};DD.config={renderTick:50,appPath:"",deviceType:"ontouchend"in document?1:2},function(){var a=function(a){var b=this;b.events=[],b.view=a.view,b.handler=a.handler,b.eventName=a.eventName,b.delg=a.delg||!1,b.nopopo=a.nopopo||!1,b.once=a.once||!1,b.capture=a.capture||!1,"click"===b.eventName&&1===DD.config.deviceType&&(b.eventName="tap"),b.delg?b.delegate():b.bind()};a.prototype.fire=function(a){function b(){for(var b=0;b<d.events.length;b++){var c=d.events[b];if(c.view.contains(a.target)){if(c.nopopo&&a.stopPropagation(),c.handler.call(d.view.$module.model,a,c.view.$getData().data,c.view),c.once&&d.events.splice(b--,1),c.nopopo)return!1;break}}return!0}function c(){DD.isFunction(d.handler)&&(d.nopopo&&a.stopPropagation(),d.handler.call(d.view.$module.model,a,d.view.$getData().data,d.view),d.once&&delete d.handler)}var d=this;void 0!==d.view&&(d.capture?(c(),b()):b()&&c(),0===d.events.length&&void 0===d.handler&&(DD.Event.TouchEvents[d.eventName]?DD.Event.unregist(d):d.view.removeEventListener(d.eventName,d.handleEvent)))},a.prototype.bind=function(a){var b=this;b.view.$events[b.eventName]||(DD.Event.TouchEvents[b.eventName]?DD.Event.regist(b):(b.handleEvent=function(a){b.fire(a)},b.view.addEventListener(b.eventName,b.handleEvent)),b.view.$events[b.eventName]=b)},a.prototype.delegate=function(b){var c=this,d=c.view.parentNode;d||(d=document.body);var e;d.$events[c.eventName]?e=d.$events[c.eventName]:(e=new a({eventName:c.eventName,view:d}),e.bind()),-1===e.events.indexOf(c)&&e.events.push(c)},DD.Event=a,DD.Event.TouchEvents={tap:{touchstart:function(a,b){var c=a.touches[0];b.extParams={pos:{sx:c.pageX,sy:c.pageY,t:Date.now()}}},touchmove:function(a,b){var c=b.extParams.pos,d=a.touches[0],e=d.pageX-c.sx,f=d.pageY-c.sy;(Math.abs(e)>5||Math.abs(f)>5)&&(c.move=!0)},touchend:function(a,b){var c=b.extParams.pos,d=Date.now()-c.t;c.move===!0||d>300||b.fire(a)}},swipe:{touchstart:function(a,b){var c=a.touches[0],d=Date.now();b.extParams={swipe:{oldTime:[d,d],speedLoc:[{x:c.pageX,y:c.pageY},{x:c.pageX,y:c.pageY}],oldLoc:{x:c.pageX,y:c.pageY}}}},touchmove:function(a,b){var c=Date.now(),d=a.touches[0],e=b.extParams.swipe;c-e.oldTime>50&&(e.speedLoc[0]={x:e.speedLoc[1].x,y:e.speedLoc[1].y},e.speedLoc[1]={x:d.pageX,y:d.pageY},e.oldTime[0]=e.oldTime[1],e.oldTime[1]=c),e.oldLoc={x:d.pageX,y:d.pageY}},touchend:function(a,b){var c=b.extParams.swipe,d=Date.now(),e=d-c.oldTime[1]<30?0:1,f=c.oldLoc.x-c.speedLoc[e].x,g=c.oldLoc.y-c.speedLoc[e].y,h=Math.sqrt(f*f+g*g),i=d-c.oldTime[e],j=h/i;if(j>.05){var k="";0>f&&Math.abs(g/f)<1&&(a.v0=j,k="swipeleft"),f>0&&Math.abs(g/f)<1&&(a.v0=j,k="swiperight"),g>0&&Math.abs(f/g)<1&&(a.v0=j,k="swipedown"),0>g&&Math.abs(f/g)<1&&(a.v0=j,k="swipeup"),b.eventName===k&&b.fire(a)}}}},DD.Event.TouchEvents.swipeleft=DD.Event.TouchEvents.swipe,DD.Event.TouchEvents.swiperight=DD.Event.TouchEvents.swipe,DD.Event.TouchEvents.swipeup=DD.Event.TouchEvents.swipe,DD.Event.TouchEvents.swipedown=DD.Event.TouchEvents.swipe,DD.Event.regist=function(a){var b=DD.Event.TouchEvents[a.eventName];DD.isEmpty(a.touchListeners)||DD.Event.unregist(a),a.touchListeners={},b&&DD.getOwnProps(b).forEach(function(c){a.touchListeners[c]=function(d){b[c](d,a)},a.view.addEventListener(c,a.touchListeners[c])})},DD.Event.unregist=function(a){var b=DD.Event.TouchEvents[a.eventName];b&&DD.getOwnProps(a.touchListeners).forEach(function(b){a.view.removeEventListener(b,a.touchListeners[b])})}}(),function(){DD.Expression={handle:function(a,b,c){var d=this;if(DD.isArray(b)){var e=!1,f=(b.length,"");return b.forEach(function(b){if("string"===b.type)f+=b.src;else{var g=d.cacExpr(a,b.src,c);!e&&g[0]&&(e=!0),f+=g[1]}}),[e,f]}},initExpr:function(a){var b,c=this,d=new RegExp(/\{\{.+?\}\}/g),e=[],f=0;for(a=a.trim();null!==(b=d.exec(a));){if(b.index>f){var g=a.substring(f,b.index);DD.isEmpty(g)||e.push({type:"string",src:g})}e.push({type:"expr",src:c.initOne(b[0].substring(2,b[0].length-2))}),f=b.index+b[0].length}if(f<a.length){var g=a.substr(f).trim();DD.isEmpty(g)||e.push({type:"string",src:g})}if(1===e.length&&1===e[0].src[0].length){var h=e[0].src[0][0].type;if("string"===h||"number"===h||"bool"===h||"blank"===h)return e[0].src[0][0].src}return e},initOne:function(exprStr){function genStack(a){for(var b=[],c=[],d=0,e=0;e<a.length;e++)for(var f=cacSign.length-1;f>=0;f--){var g=cacSign[f].length;if(a.substr(e,g)===cacSign[f]){b.push(a.substr(d,e-d).trim()),c.push(cacSign[f]),e+=g-1,d=e+1;break}}return d<a.length&&b.push(a.substr(d).trim()),[b,c]}function getParams(a){var b=[],c=a.substring(a.indexOf("(")+1,a.lastIndexOf(")"));if(""!==c&&""!==(c=c.trim())){var d=c.split(",");d.forEach(function(a){a=a.trim();for(var c=0;c<strArr.length;c++)if(strPrev+c===a)return void b.push({type:"string",src:strArr[c]});var d;d=isNaN(a)?{type:"field",src:a}:{type:"number",src:a},b.push(d)})}return b}function initFilter(){for(var a=0;a<stacks[1].length;a++)if("|"===stacks[1][a]){var b={type:"filter",exprs:[stacks[0][a],stacks[0][a+1]],signs:[]},c=a,d=stacks[1][a-1],e=0;if(")"===d){e++,b.exprs[0]=stacks[0][a-1],stacks[0].splice(a);for(var f=a-2;f>=0;f--)if(")"===stacks[1][f])e++;else if("("===stacks[1][f]&&0===--e){c=f;break}b.signs.unshift(d);for(var f=a-2;f>=c;f--)b.exprs.unshift(stacks[0][f]),b.signs.unshift(stacks[1][f])}stacks[0].splice(c,a-c+2,b),stacks[1].splice(c,a-c+1),a=c}}for(var cacSign=["(",")","!","|","*","/","+","-",">","<",">=","<=","==","===","&&","||","%"],regFun=new RegExp(/[\w$][\w$\d\.]*\(.*?\)/),regStr=new RegExp(/(\'.+?\')|(\".+?\")/),funPrev="$DDfun_rep_",strPrev="$DDstr_rep_",funArr=[],strArr=[],repIndex=0,r;null!==(r=regStr.exec(exprStr));)exprStr=exprStr.replace(r[0],strPrev+repIndex++),strArr.push(r[0]);for(repIndex=0;null!==(r=regFun.exec(exprStr));)exprStr=exprStr.replace(r[0],funPrev+repIndex++),funArr.push(r[0]);var stacks=genStack(exprStr),stack1=[];return stacks[0].forEach(function(item,ii){for(var i=0;i<funArr.length;i++)if(-1!==item.indexOf(funPrev+i)){var ind1=funArr[i].indexOf("("),fn=funArr[i].substr(0,ind1).trim(),pm=getParams(funArr[i]);return void stack1.push({type:"function",fn:fn,params:pm})}for(var i=0;i<strArr.length;i++)if(-1!==item.indexOf(strPrev+i))return void stack1.push({type:"string",src:item.replace(strPrev+i,strArr[i])});""===item?stack1.push({type:"blank",src:item}):isNaN(item)?"true"===item||"false"===item?stack1.push({type:"bool",src:eval(item)}):stack1.push({type:"field",src:item}):stack1.push({type:"number",src:eval(item)})}),stacks[0]=stack1,initFilter(),stacks},cacExpr:function(module,stacks,model){function invoke(funObj){var foo,isSystem=!1;-1===funObj.fn.indexOf(".")?foo=module.methodFactory.get(funObj.fn):(isSystem=!0,foo=eval(funObj.fn));var pa=[],change=!1;return funObj.params.forEach(function(p){switch(p.type){case"field":var v=getValue(module,p.src,model);v[0]&&(change=!0),v=v[1],pa.push(v);break;case"number":pa.push(eval(p.src));break;default:pa.push(p.src)}}),isSystem?[change,foo.apply(null,pa)]:[change,foo.apply(module.model,pa)]}function filter(filterObj){for(var exprs=filterObj.exprs,signs=filterObj.signs,src,r="",change=!1,i=0;i<exprs.length-1;i++){var r1=cacOne(exprs[i]);r1[0]&&(change=!0),r+=r1[1],i<signs.length&&(r+=signs[i])}if(signs.length>0)try{r=eval(r)}catch(e){}return[change,DD.Filter.handle(module,r,exprs[i].src)]}function cacOne(a){function b(a){if(!hasCac)return a;if(void 0===a||a===!0||a===!1||null===a)return a;if(DD.isString(a)){var b=a.indexOf("'");-1!==b?b>0&&(a='"'+a+'"'):((b=a.indexOf('"'))>0||-1===b)&&(a="'"+a+"'")}return a}switch(a.type){case"field":var c=getValue(module,a.src,model);return[c[0],b(c[1])];case"function":var c=invoke(a);return[c[0],b(c[1])];case"filter":var c=filter(a);return[c[0],b(c[1])];default:return[!1,a.src]}}function getValue(a,b,c){var d=c.data;if(null===d||void 0===d)return[!1,""];if("$index"===b)return[c.oldIndex!==c.index,c.index];if(DD.isFunction(d.$get)){var e=d.$get(b);if(void 0!==e[1])return e}return[!1,""]}for(var expr="",hasCac=!1,i=0;i<stacks[1].length;i++)if(""!==stacks[1][i]){hasCac=!0;break}var isChange=!1;if(stacks[0].forEach(function(a,b){var c=cacOne(a);!isChange&&c[0]&&(isChange=!0);var d=c[1],e="";b<stacks[1].length&&(e=stacks[1][b]),expr+=d+e}),hasCac)try{""!==expr&&(expr=eval(expr))}catch(e){}return[isChange,expr]}}}(),function(){function initmodel(a){var b=this;a=a.trim();var c=b.$getDirective("model");c.value=a}function initrepeat(a){var b,c=this;a=a.trim();var d,e;-1!==(d=a.indexOf("|"))?(b=a.substr(0,d).trim(),e=a.substr(d+1).trim()):b=a;var f=c.$getDirective("repeat");f.value=b,f.filter=e,f.done=!1;var g=document.createTextNode("");DD.replaceNode(c,g),g.$savedDoms.repeat=c,DD.Directive.initViewDirective(g,[{name:"model",value:b}]),c.$removeDirective("repeat")}function initif(a){var b=this,c=b.nextElementSibling||b.nextSibling,d=b.$getDirective("if");d.value=DD.Expression.initExpr("{{"+d.value+"}}");var e=[b];DD.isEl(c)&&c.hasAttribute("x-else")?(d.hasElse=!0,e.push(c)):d.hasElse=!1;var f=document.createTextNode("");DD.replaceNode(b,f),b.$removeDirective("if"),f.$savedDoms["if"]=e}function initelse(a){this.$removeDirective("else"),DD.remove(this)}function initshow(a){var b=this,c=b.$getDirective("show");c.value=DD.Expression.initExpr("{{"+c.value+"}}")}function initclass(value){var view=this,d=view.$getDirective("class"),obj=eval("("+value+")");if(DD.isObject(obj)){var robj={};DD.getOwnProps(obj).forEach(function(a){DD.isString(obj[a])?robj[a]=DD.Expression.initExpr("{{"+obj[a]+"}}",view.$module):robj[a]=obj[a]}),d.value=robj}}function initfield(){var a,b,c=this,d=c.$getDirective("field").value;b=-1!==(a=d.indexOf("|"))?d.substr(0,a):d;var e=c.tagName.toLowerCase(),f="input";"input"!==e||"checkbox"!==c.type&&"radio"!==c.type||(f="change"),"radio"!==c.type&&(c.$attrs.value=DD.Expression.initExpr("{{"+d+"}}",c)),new DD.Event({view:c,eventName:f,handler:function(a,c,d){"checkbox"===d.type&&(DD.attr(d,"yes-value")===d.value?d.value=DD.attr(d,"no-value"):d.value=DD.attr(d,"yes-value")),c[b]=d.value}})}function domodel(a){var b=this;b.$model=null,b.$model=b.$getData()}function dorepeat(a){var b=this;DD.isEmpty(a)&&(a=b.$getDirective("repeat"));var c=b.$model;if(void 0!==c.data&&DD.isArray(c.data)&&0!==c.data.length){var d=[];d=a.filter?DD.Filter.handle(b.$module,c.data,a.filter):c.data;for(var e=[],f=b.nextElementSibling||b.nextSibling;f&&f.$fromNode===b;)e.push(f),f=f.nextElementSibling||f.nextSibling;var g,g=b;d.forEach(function(a,c){var d;c<e.length?d=e[c]:(d=DD.cloneNode(b.$savedDoms.repeat),d.$fromNode=b,DD.insertAfter(d,g)),d.$model.data=a,d.$forceRender=b.$forceRender,(b.$forceRender||c>=e.length)&&d.$setForceRender(!0),d.$model.index!==c&&(d.$model.oldIndex=d.$model.index,a.$changed=!0),d.$model.index=c,g=d});for(var h=e.length-1;h>=d.length;h--)DD.remove(e[h])}}function doif(a){var b=this;DD.isEmpty(a)&&(a=b.$getDirective("if"));var c=b.$getData();if(DD.isArray(a.value)){var d=DD.Expression.handle(b.$module,a.value,c);if(!d[0]&&!b.$forceRender)return;var e=d[1]}else e=a.value;e=e&&"false"!==e?!0:!1;var f;if(e){if(a.yes===!0)return;f=b.$savedDoms["if"][0]}else if(a.hasElse){if(a.yes===!1)return;f=b.$savedDoms["if"][1]}if(a.yes=e,b.nextSibling&&b.nextSibling.$fromNode===b&&DD.remove(b.nextSibling),void 0!==f){var g=DD.cloneNode(f);DD.insertAfter(g,b),g.$fromNode=b,g.$setForceRender(!0)}}function doclass(a){var b=this;if(b.nodeType===Node.ELEMENT_NODE){DD.isEmpty(a)&&(a=b.$getDirective("class"));var c=b.$getData(),d=a.value;DD.getOwnProps(d).forEach(function(a){var e=d[a];if(DD.isArray(d[a])){var f=DD.Expression.handle(b.$module,d[a],c);if(!f[0]&&!b.$forceRender)return;e=f[1]}e=e&&"false"!==e?!0:!1,e?DD.addClass(b,a):DD.removeClass(b,a)})}}function doshow(a){function b(){a.yes?DD.css(d,"display",a.display):DD.css(d,"display","none")}function c(){var b=d.$getData(),c=!0;if(DD.isArray(a.value)){var e=DD.Expression.handle(d.$module,a.value,b);if(!e[0]&&!d.$forceRender)return!1;c=e[1]}else c=a.value;if(c=c&&"false"!==c?!0:!1){if(a.yes===!0)return!1}else if(a.yes===!1)return!1;return a.yes=c,!0}var d=this;DD.isEmpty(a)&&(a=d.$getDirective("show"));var e=c();a.display?e&&b():setTimeout(function(){if(void 0===a.display){var c=DD.css(d,"display");(""===c||"none"===c)&&(c="inline"),a.display=c}e&&b()},0)}function dofield(a){var b=this,c=b.type,d=b.tagName.toLowerCase();if("radio"===c||"checkbox"===c||"select"===d){var e=b.$getData(),f=e.data.$get(a.value);if(f[0]||b.$forceRender){var g=f[1];if("radio"===c){var h=b.value;g==h?DD.attr(b,"checked","checked"):b.removeAttribute("checked")}else if("checkbox"===c){var i=DD.attr(b,"yes-value");g+""==i?(DD.attr(b,"checked","checked"),b.value=i):(b.removeAttribute("checked"),b.value=DD.attr(b,"no-value"))}else"select"===d&&setTimeout(function(){b.value=g},0)}}}DD.Directive={directives:{model:{preOrder:1,once:!1,sys:!0,init:initmodel,handler:domodel},repeat:{preOrder:2,once:!1,sys:!0,init:initrepeat,handler:dorepeat},"class":{preOrder:3,once:!1,sys:!0,init:initclass,handler:doclass},"if":{preOrder:5,once:!1,sys:!0,init:initif,handler:doif},"else":{preOrder:5,once:!1,sys:!0,init:initelse},show:{preOrder:5,sys:!0,init:initshow,handler:doshow},field:{preOrder:5,init:initfield,handler:dofield}},create:function(a){var b=this;(void 0===a.preOrder||a.preOrder<10)&&(a.preOrder=10),a.once=a.once||!1,b.directives[a.name]=a},remove:function(a){var b=this;DD.Directive.directives[name];delete b.directives[a]},get:function(a){return this.directives[a]},sortDirectives:function(a){var b=this,c=a.$directives;c.length>1&&c.sort(function(a,c){var d=a.name,e=c.name,f=b.directives[d],g=b.directives[e];return f.preOrder-g.preOrder})},initViewDirectives:function(a){var b=this,c=DD.getAttrs(a,/^x-/);c.forEach(function(b){a.removeAttribute(b.name)}),c.forEach(function(c){var d=c.name.substr(2),e=c.value;a.$directives.push({name:d,value:e}),void 0!==b.directives[d]&&DD.isFunction(b.directives[d].init)&&b.directives[d].init.call(a,e)}),b.sortDirectives(a)},initViewDirective:function(a,b){var c=this;b.forEach(function(b){a.$hasDirective(b.name)||a.$directives.push(b);b.value;void 0!==c.directives[b.name]&&DD.isFunction(c.directives[b.name].init)&&c.directives[b.name].init.call(a,b.value)}),c.sortDirectives(a)},handle:function(a){var b=this,c=[];if(a.$directives.forEach(function(d){var e=d.name,f=b.directives[e];void 0!==f&&DD.isFunction(f.handler)&&(f.handler.call(a,d),f.once===!0&&c.push(a.$directives.indexOf(d)))}),c.length>0)for(var d=c.length-1;d>=0;d--)a.$directives.splice(c[d],1)}}}(),function(){DD.Filter={cantEditFilters:["date","currency","number","tolowercase","touppercase","orderBy","filter"],filters:{date:function(a,b){var c=b[0];return c=c.substr(1,c.length-2),DD.formatDate(a,c)},currency:function(a,b){var c;return DD.isArray(b)&&(c=b[0]),"string"==typeof a&&(a=parseFloat(a)),DD.isEmpty(c)&&(c="¥"),c+DD.Filter.filters.number(a,[2])},number:function(a,b){var c=b[0]||0;"string"==typeof a&&(a=parseFloat(a));for(var d=1,e=0;c>e;e++)d*=10;return((a*d+.5|0)/d).toFixed(c)},tolowercase:function(a){return a.toLowerCase()},touppercase:function(a){return a.toUpperCase()},orderBy:function(a,b){var c=b[0],d=b[1]||"asc",e=a.concat([]);return e.sort(function(a,b){return"asc"===d?a[c]>b[c]:a[c]<b[c]}),e},select:function(array,pa){var me=this,handler={odd:function(a){for(var b=[],c=0;c<a.length;c++)c%2===1&&b.push(a[c]);return b},even:function(a){for(var b=[],c=0;c<a.length;c++)c%2===0&&b.push(a[c]);return b},range:function(a,b){var c,d;return c=parseInt(b[0]),d=parseInt(b[1]),a.slice(c,d+1)},index:function(a,b){var c=[],d=a.length;return b.length>0&&b.forEach(function(b){isNaN(b)||(parseInt(b),b>=0&&d>b&&c.push(a[b]))}),c},func:function(a,b){var c=me.methodFactory.get(b[0]);return DD.isFunction(c)?c(a):a},value:function(arr,param){var ret=[];if("{"===param[0]&&"}"===param[param.length-1]&&(param=eval("("+param+")")),DD.isObject(param)){var keys=DD.getOwnProps(param);return arr.filter(function(a){for(var b=0;b<keys.length;b++){var c=a[keys[b]],d=param[keys[b]];if("string"==typeof c&&-1!==c.indexOf(d)||c===d)return!0}return!1})}return arr.filter(function(a){for(var b=DD.getOwnProps(a),c=0;c<b.length;c++){var d=a[b[c]];if(DD.isString(d)&&-1!==d.indexOf(param))return a}})}},type=pa[0].trim();return handler.hasOwnProperty(type)||(type="value"),"range"===type||"index"===type||"func"===type?handler[type].call(me,array,pa.slice(1)):"value"===type?handler[type].call(me,array,pa[0]):handler[type].call(me,array)}},handle:function(a,b,c){var d=this;if(DD.isEmpty(b))return"";if(DD.isEmpty(c))return b;for(var e,f="$DD_rparam_",g=new RegExp(/(\{.+?\})|(".+?")|('.+?')/g),h=[],i=0;null!==(e=g.exec(c));)h.push(e[0]),c=c.replace(e[0],f+i++);var j=c.split("|");return j.forEach(function(c){if(!DD.isEmpty(c.trim())){for(var e=c.split(":"),g=0;g<e.length;g++)e[g]=e[g].trim();var i=e[0];if(h.length>0)for(var j=1;j<e.length;j++)for(var g=0,k=h.length;k>g;g++)e[j]=e[j].trim().replace(f+g,h[g]);DD.isFunction(d.filters[i])&&(b=d.filters[i].call(a,b,e.slice(1)))}}),b},add:function(a,b){var c=this;c.filters[a]=b},remove:function(a){var b=this;delete b.filters[a]}}}(),function(){var a=function(){var a=this;a.methods={}};a.prototype={add:function(a,b){var c=this;c.methods[a]=b},remove:function(a){var b=this;delete b.methods[a]},get:function(a){return this.methods[a]}},DD.MethodFactory=a}(),function(){var a=function(a){var b=this,c=a.data;return b.init=!0,b.module=a.module,DD.isObject(c)?b.createObjectModel(c):DD.isArray(c)&&b.createArrayModel(c),b.data=c,c.$model=b,delete b.init,b.module.model=b,b},b={$fields:void 0,$set:function(a,b){for(var c,d=this,e=a.split("."),f=0;f<e.length-1;f++)c=e[f],d=d[c];c=e[f],void 0===d[c]&&(d.$model.init=!0,Object.defineProperty(d,a,{set:function(b){d.$model.setProp(d,a,b)},get:function(){return d.$model.getProp(d,a)}})),d[c]=b,delete d.$model.init},$get:function(a){for(var b,c=this,d=a.split("."),e=0;e<d.length&&c;e++)if(d[e].lastIndexOf("]")===d[e].length-1){var f=d[e].split("[");c=c[f[0]],f.shift(),f.forEach(function(a){var b=a.substr(0,a.length-1);c=c[parseInt(b)]})}else c.$fields&&(b=c.$fields["$old_"+d[e]],c=c[d[e]]);var g=!1;return void 0!==b&&(g=!0),[g,c]}};a.prototype.setProp=function(a,b,c){var d=this;a.$model=d,void 0===a.$fields&&(a.$fields={});var e=a.$fields[b]!==c;e&&(DD.isObject(c)?(d.init=!0,d.createObjectModel(c),a.$fields[b]=c):DD.isArray(c)?(d.createArrayModel(c),a.$fields[b]=c):(d.init?a.$fields["$old_"+b]=null:a.$fields["$old_"+b]=a.$fields[b],a.$fields[b]=c),d.change(a))},a.prototype.getProp=function(a,b){return a.$fields[b]},a.prototype.change=function(a){a.$changed=!0,DD.Renderer.add(this.module)},a.prototype.clean=function(a){var b=this;a=a||b.data,delete a.$changed,DD.isObject(a)?DD.getOwnProps(a).forEach(function(c){"$"===c[0]||DD.isFunction(a[c])||(DD.isObject(a[c])||DD.isArray(a[c])?b.clean(a[c]):delete a.$fields["$old_"+c])}):DD.isArray(a)&&a.forEach(function(a){DD.isObject(a)&&b.clean(a)})},a.prototype.setDefault=function(a){var b=this;a=a||b.data,DD.isObject(a)?DD.getOwnProps(a).forEach(function(c){"$"===c[0]||DD.isFunction(a[c])||(DD.isObject(a[c])||DD.isArray(a[c])?b.setDefault(a[c]):a.$fields["$old_"+c]=null)}):DD.isArray(a)&&a.forEach(function(a){DD.isObject(a)&&b.setDefault(a)})},a.prototype.createObjectModel=function(a){var c=this;DD.assign(a,b),a.$model=c,a.$changed=!0,DD.getOwnProps(a).forEach(function(b){if("$"!==b[0]&&!DD.isFunction(a[b])){var d=a[b];Object.defineProperty(a,b,{set:function(d){c.setProp(a,b,d)},get:function(){return c.getProp(a,b)}}),a[b]=d}})},a.prototype.createArrayModel=function(a){var b=this;a.$model=b,a.$changed=!0;for(var c=0;c<a.length;c++){var d=a[c];DD.isObject(d)&&b.createObjectModel(d),DD.isArray(d)&&b.createArrayModel(d)}var e=["push","unshift","splice","pop","shift","reverse","sort"];e.forEach(function(c){a[c]=function(){Array.prototype[c].apply(a,arguments);var d=[];switch(c){case"push":d=arguments;break;case"unshift":d=arguments;break;case"splice":if(arguments.length>2)for(var e=2;e<arguments.length;e++)d.push(arguments[e])}for(var e=0;e<d.length;e++){var f=d[e];DD.isObject(f)&&b.createObjectModel(f),DD.isArray(f)&&b.createArrayModel(f)}b.change(a)}})},DD.Model=a}(),function(){var a=function(a){var b=this;return b.name=a.name||"DDModule_"+DD.genId(),b.methodFactory=new DD.MethodFactory,b.modules=[],b.compiled=!1,b.inited=!1,b.onReceive=a.onReceive,b.onInit=a.onInit,b.fromModules=a.fromModules,b.onRender=a.onRender,b.onFirstRender=a.onFirstRender,b.initConfig=DD.merge({delayInit:!1},a),b.el=b.initConfig.el,DD.isEmpty(a.methods)||DD.getOwnProps(a.methods).forEach(function(c){b.methodFactory.add(c,a.methods[c])}),delete a.methods,b.initConfig.delayInit||b.init(a),a.root===!0&&(DD.App=b),b};a.prototype.init=function(b){var c=this,d=c.initConfig;d.parent instanceof a&&(c.parent=d.parent),c.virtualDom=DD.newEl("div");var e,f;if(c.parent){if(DD.isString(c.parent)){var g=c.parent;c.parent=DD.moduleFactory.get(g)}e=c.parent.$rendered?c.parent.view:c.parent.virtualDom}else e=document.body;f=DD.get(d.el,!1,e),f&&f.childNodes&&DD.transChildren(f,c.virtualDom),c.load(function(a,e){if(!DD.isEmpty(e)){var f=DD.newEl("div");f.innerHTML=e,DD.transChildren(f,c.virtualDom)}c.compile(),DD.Renderer.add(c),a&&new DD.Model({data:a,module:c}),DD.isArray(d.modules)&&d.modules.forEach(function(a){c.addModule(a)}),DD.isFunction(d.onInit)&&d.onInit.call(c.model),DD.isFunction(b)&&b(c),delete c.initConfig}),c.inited=!0},a.prototype.load=function(a){function b(){DD.isFunction(a)&&0===i&&a(e,f)}function c(){DD.isArray(h.requires)&&h.requires.length>0?(h.requires.forEach(function(a,b){var c,e="js";switch(DD.isObject(a)?(c=a.path,e=a.type||e):"string"==typeof a&&(c=a),e){case"css":DD.load("css",c);break;default:i++,DD.load("js",c,function(){0===--i&&d()})}}),0===i&&d()):d()}function d(){if(DD.isObject(h.data)?e=h.data:DD.isEmpty(h.dataUrl)||(i++,DD.request({url:h.dataUrl,type:"json",successFunc:function(a){e=a,0===--i&&b()}})),DD.isEmpty(h.template)){if(!DD.isEmpty(h.templateUrl)){var a=h.templateUrl;DD.config&&!DD.isEmpty(DD.config.appPath)&&(a=DD.config.appPath+"/"+a),i++,DD.request({url:a,successFunc:function(a){f=a,0===--i&&b()}})}}else f=h.template}var e,f,g=this,h=g.initConfig,i=0;c(),0===i&&b()},a.prototype.compile=function(a){function b(a){DD.merge(a,DD.extendElementConfig),a.$module=d,DD.getAttrsByValue(a,/\{\{.+?\}\}/).forEach(function(b){d.needData=!0,a.$attrs[b.name]=DD.Expression.initExpr(b.value,a)}),DD.Directive.initViewDirectives(a),a.$hasDirective("model")&&(d.needData=!0);for(var c=a.childNodes,e=0;e<c.length;e++){var f=c[e];switch(f.nodeType){case Node.TEXT_NODE:""!==f.textContent.trim()&&/\{\{.+\}\}?/.test(f.textContent)&&(d.needData=!0,f.$exprs=DD.Expression.initExpr(f.textContent,d),f.textContent=" ");break;case Node.COMMENT_NODE:a.removeChild(f),e--;break;default:b(f)}}return a}var c,d=this;if(d.className&&void 0!==(c=DD.Module.getClass(d.className))&&c.virtualDom)return void(d.virtualDom=c.virtualDom);if(a)b(a);else{var e=b(d.virtualDom);void 0!==c&&(c.virtualDom=e),d.compiled=!0}},a.prototype.render=function(a,b){function c(a,b){if(a.$isRouterView===!0&&(f.routerView=a),!(a.needData===!1||a!==f.view&&a.$containModule)){if(b||(a.$module=f),a.$isView){!a.$rendered&&DD.isEl(a)&&e(a);
var d=a.$getData();if(d.data&&d.data.$changed||a.$forceRender||f.forceRender){if(DD.isEl(a)){var g=[];DD.getOwnProps(a.$attrs).forEach(function(b){if("function"!=typeof a.$attrs[b]){var c=DD.Expression.handle(f,a.$attrs[b],d);if(c[0]||a.$forceRender){var e=c[1];"x-"===b.substr(0,2)?g.push({name:b.substr(2),value:e}):DD.attr(a,b,e)}}}),g.length>0&&DD.Directive.initViewDirective(a,g)}a.$directives.length>0&&DD.Directive.handle(a)}for(var h=0;h<a.childNodes.length;h++)(a.$isView||d.data.$changed)&&c(a.childNodes[h]);a.$rendered=!0,delete a.$forceRender}else if(f.model&&f.model.data&&a.nodeType===Node.TEXT_NODE&&a.$exprs){var d=a.parentNode.$getData();if(d.data&&d.data.$changed||a.parentNode.$forceRender||f.forceRender){var i=DD.Expression.handle(f,a.$exprs,d);if(!i[0]&&!a.parentNode.$forceRender&&!f.forceRender)return;for(var j=a.nextSibling;j&&j.$genNode;){var k=j.nextSibling;DD.remove(j),j=k}var l=/[(\&lt;.*?\&gt;)(\<.*?\>)]/.test(i[1]);if(l){var m=document.createElement("div");m.innerHTML=i[1],f.compile(m);for(var n=document.createDocumentFragment(),h=0;h<m.childNodes.length;){var k=m.childNodes[h];k.$genNode=!0,n.appendChild(m.childNodes[h])}DD.insertAfter(n,a)}else a.textContent=i[1]}}return a}}function d(a){return a.view||(a.parent?(a.parent.view||d(a.parent),a.parent.view&&(a.view=DD.get(a.el,!1,a.parent.view))):a.view=DD.get(a.el,!1,document.body)),a.view}function e(a){var b=DD.getAttrs(a,/^e-/);b.length>0&&b.forEach(function(b){var c=b.value.split(":"),d=f.methodFactory.get(c[0]);if(d){var e=b.name.substr(2),g={view:a,eventName:e,handler:d};if(c.length>1)for(var h=1;h<c.length;h++)g[c[h]]=!0;new DD.Event(g),a.removeAttribute(b.name)}})}var f=this;if(!f.compiled)return!1;if(d(f),!DD.isEl(f.view))return!0;if(f.view.$isView||(DD.merge(f.view,DD.extendElementConfig),f.view.$isView=!0),f.needData&&!f.model)return!1;if(0===f.view.childNodes.length){var g=DD.cloneNode(f.virtualDom);c(g,!0),DD.transChildren(g,f.view),f.view.$containModule=!0,!f.rendered&&DD.isFunction(f.onFirstRender)&&f.onFirstRender.call(f.model),f.rendered=!0}else c(f.view,!0);return DD.isFunction(f.onRender)&&f.onRender.call(f.model),f.model&&f.model.clean(),f.renderChildren&&(f.modules.forEach(function(a){a.renderChildren=!0,a.render()}),delete f.renderChildren),delete f.forceRender,DD.Router&&setTimeout(function(){DD.Router.setRouteFinish(f),DD.Router.linkLoad()},0),!0},a.prototype.destroy=function(){delete DD.Module.moduleFactory[this.name],DD.Renderer.remove(this)},a.prototype.addModule=function(a){var b=this;a.parent=b;var c=DD.Module.newInstance(a);return b.modules.push(c),c},a.prototype.setData=function(a){var b=this;b.model&&!DD.isEmpty(b.model.data)&&DD.getOwnProps(b.model.data).forEach(function(c){"$"===c[0]&&(a[c]=b.model.data[c])}),new DD.Model({data:a,module:b})},a.prototype.broadcast=function(a){var b=this,c=b.name,d=[];b.parent&&(d.push(b.parent),d=d.concat(b.parent.modules)),d=d.concat(b.modules),d.forEach(function(d){if(d!==b&&DD.isFunction(d.onReceive)){var e=!0;DD.isArray(d.fromModules)&&0!==d.fromModules.length&&-1===d.fromModules.indexOf(c)&&(e=!1),e&&d.onReceive.call(d.model,c,a)}})},a.prototype.send=function(a,b){var c=DD.Module.get(a);DD.isFunction(c.onReceive)&&c.onReceive.call(c.model,this.name,b)},a.prototype.setForceRender=function(a){var b=this;b.forceRender=a,b.modules.forEach(function(b){b.setForceRender(a)})},DD.assign(a,{classFactory:{},moduleFactory:{},define:function(a){var b=this,c=a.className;return b.classFactory[c]=DD.merge({virtualDom:null},a),b.classFactory[c]},getClass:function(a){return this.classFactory[a]},newInstance:function(a){var b,c=this;if(DD.isEmpty(a.className))b=a;else{var d=c.getClass(a.className);void 0!==d&&(b=DD.extend({},d,a))}var e=new DD.Module(b);return c.moduleFactory[e.name]=e,e},get:function(a){return this.moduleFactory[a]}}),DD.assign(DD,{createModule:function(a){return DD.isArray(a)?void a.forEach(function(a){DD.Module.newInstance(a)}):DD.Module.newInstance(a)},defineModule:function(a){return DD.Module.define(a)}}),DD.Module=a}(),DD.extendElementConfig={$module:null,$containModule:null,$isRouterView:!1,$directives:[],$savedDoms:{},$model:{},$attrs:{},$exprs:[],$isView:!0,$events:{},$routeConfig:{},$forceRender:!1,$hasDirective:function(a){var b=this,c=b.$directives;if(DD.isArray(c))for(var d=0;d<c.length;d++)if(c[d].name===a)return!0;return!1},$getDirective:function(a){var b=this,c=b.$directives;if(DD.isArray(c))for(var d=0;d<c.length;d++)if(c[d].name===a)return c[d];return null},$removeDirective:function(a){var b=this,c=b.$directives;if(DD.isArray(c))for(var d=0;d<c.length;d++)if(c[d].name===a){c.splice(d);break}},$getData:function(){var a=this;if(!a.$isView)return null;var b,c,d;if(a.$model&&a.$model.data)b=a.$model.data,c=a.$model.index,d=a.$model.oldIndex;else if(a.$module&&a.$module.model&&a.$module.model.data){for(var e=a;e&&e.$isView&&e!==a.$module.view;e=e.parentNode)if(e.$model&&e.$model.data){c=e.$model.index,b=e.$model.data,d=e.$model.oldIndex;break}if(a.$hasDirective("model")){var f=a.$getDirective("model").value;b?DD.isObject(b)&&(DD.isEmpty(f)||(b=b.$get(f)[1])):b=a.$module.model.data.$get(f)[1]}b||a.$hasDirective("model")||(b=a.$module.model.data)}return{data:b,index:c,oldIndex:d}},$setForceRender:function(a){var b=this;if(b.$forceRender=a,b.childNodes)for(var c=0;c<b.childNodes.length;c++){var d=b.childNodes[c];d.$isView&&d.$setForceRender(a)}}},function(){function a(){DD.Renderer.render(),requestAnimationFrame?requestAnimationFrame(a):setTimeout(a,DD.config.renderTick)}DD.Renderer={waitList:[],add:function(a){var b=this;if(-1===b.waitList.indexOf(a)){if(void 0===a.prio)for(var c=1,d=a.parent;void 0!==d;)c++,d=d.parent;a.prio=c,b.waitList.push(a),b.waitList.sort(function(a,b){return a.prio-b.prio})}},remove:function(a){var b;-1!==(b=me.waitList.indexOf(a))&&me.waitList.splice(b,1)},render:function(){var a=this;if(0!==a.waitList.length)for(var b=0;b<a.waitList.length;b++){var c=a.waitList[b];c.render()&&a.waitList.splice(b--,1)}}},a()}();